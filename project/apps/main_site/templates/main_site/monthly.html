{% extends "base.html" %}{% load compress %}

{% block css %}{{block.super}}
{% compress css %}
<link rel="stylesheet" href="{{STATIC_URL}}main_site/css/fonts.css">
<link rel="stylesheet" href="{{STATIC_URL}}main_site/css/site.css">
{% endcompress %}
{% endblock %}

{% block js %}{{block.super}}
{% compress js %}
<script src="{{STATIC_URL}}main_site/js/site.js"></script>
{% endcompress %}
<script type="text/javascript">
    var chart;
    var chartData = [
		{% for g in gutterbumpers %}
		{
			date: new Date({{g.date|date:"Y, m, d"}}),
			sleep: {{g.sleep_hrs|default:0}},
			work: {{g.work_hrs|default:0}},
			alone: {{g.alone_hrs|default:0}},
			friend: {{g.friend_hrs|default:0}},
			in_public: {{g.public_hrs|default:0}},
			relationship: {{g.relationship_hrs|default:0}}
		},
		{% endfor %}
    ];
 </script>
 
 {% compress js %}
 <script> 
    var chartCursor;
 	AmCharts.ready(function () {
        // SERIAL CHART
        chart = new AmCharts.AmSerialChart();
        chart.pathToImages = "{{STATIC_URL}}base/js/libs/amcharts/images/";
        chart.zoomOutButton = {
            backgroundColor: "#000000",
            backgroundAlpha: 0.15
        };
        chart.dataProvider = chartData;
        chart.marginTop = 10;
        chart.marginRight = 30;
        chart.categoryField = "date";

        // AXES
        // Category
        var categoryAxis = chart.categoryAxis;
        categoryAxis.gridAlpha = 0.07;
        categoryAxis.axisColor = "#DADADA";
        categoryAxis.startOnAxis = true;
        categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
        categoryAxis.minPeriod = "DD";

        // Value
        var valueAxis = new AmCharts.ValueAxis();
        valueAxis.stackType = "regular"; // this line makes the chart "stacked"
        valueAxis.gridAlpha = 0.07;
        valueAxis.axisColor = "#DADADA";
        valueAxis.title = "Hours";
        valueAxis.titleBold = false;
        chart.addValueAxis(valueAxis);

        // GRAPHS
        // first graph
        var graph = new AmCharts.AmGraph();
        graph.type = "line";
        graph.title = "sleep";
        graph.valueField = "sleep";
        graph.lineAlpha = 1;
        graph.fillAlphas = 0.6; // setting fillAlphas to > 0 value makes it area graph
        chart.addGraph(graph);

        // second graph
        graph = new AmCharts.AmGraph();
        graph.type = "line";
        graph.title = "work";
        graph.valueField = "work";
        graph.lineAlpha = 1;
        graph.fillAlphas = 0.6;
        chart.addGraph(graph);

        // third graph
        graph = new AmCharts.AmGraph();
        graph.type = "line";
        graph.title = "alone";
        graph.valueField = "alone";
        graph.lineAlpha = 1;
        graph.fillAlphas = 0.6;
        chart.addGraph(graph);

                var graph = new AmCharts.AmGraph();
        graph.type = "line";
        graph.title = "relationship";
        graph.valueField = "relationship";
        graph.lineAlpha = 1;
        graph.fillAlphas = 0.6; // setting fillAlphas to > 0 value makes it area graph
        chart.addGraph(graph);

        // second graph
        graph = new AmCharts.AmGraph();
        graph.type = "line";
        graph.title = "friend";
        graph.valueField = "friend";
        graph.lineAlpha = 1;
        graph.fillAlphas = 0.6;
        chart.addGraph(graph);

        // third graph
        graph = new AmCharts.AmGraph();
        graph.type = "line";
        graph.title = "public";
        graph.valueField = "in_public";
        graph.lineAlpha = 1;
        graph.fillAlphas = 0.6;
        chart.addGraph(graph);

        // LEGEND
        var legend = new AmCharts.AmLegend();
        legend.position = "top";
        chart.addLegend(legend);

        // CURSOR
        var chartCursor = new AmCharts.ChartCursor();
        chartCursor.zoomable = false; // as the chart displayes not too many values, we disabled zooming
        chartCursor.cursorAlpha = 0;
        chart.addChartCursor(chartCursor);

        // WRITE
        chart.write("chartdiv");
    });
</script>
{% endcompress %}
{% endblock %}


{% block content %}
<div id="chartdiv" style="width:100%; height:600px;"></div>

{% endblock %}